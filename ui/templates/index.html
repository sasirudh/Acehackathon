<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FILLSAFE AI</title>
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="header">
        <div class="logo">FILLSAFE AI</div>
        <div class="nav">
            <a href="{{ url_for('login') }}">Login</a>
            <a href="#">Sign Up</a>
            <a href="#">Contact Us</a>
        </div>
    </div>

    <h3>Upload the required video</h3>

    <div class="container">
        <div class="left-column">
            <div class="clock" aria-label="00:00:00 AM">
                <div class="clock__block clock__block--delay2" aria-hidden="true" data-time-group>
                    <div class="clock__digit-group">
                        <div class="clock__digits" data-time="a">00</div>
                        <div class="clock__digits" data-time="b">00</div>
                    </div>
                </div>
                <div class="clock__colon"></div>
                <div class="clock__block clock__block--delay1" aria-hidden="true" data-time-group>
                    <div class="clock__digit-group">
                        <div class="clock__digits" data-time="a">00</div>
                        <div class="clock__digits" data-time="b">00</div>
                    </div>
                </div>
                <div class="clock__colon"></div>
                <div class="clock__block" aria-hidden="true" data-time-group>
                    <div class="clock__digit-group">
                        <div class="clock__digits" data-time="a">00</div>
                        <div class="clock__digits" data-time="b">00</div>
                    </div>
                </div>
                <div class="clock__block clock__block--delay2 clock__block--small" aria-hidden="true" data-time-group>
                    <div class="clock__digit-group">
                        <div class="clock__digits" data-time="a">PM</div>
                        <div class="clock__digits" data-time="b">AM</div>
                    </div>
                </div>
            </div>
            
            <div class="video-frame" id="video-frame">
                <video id="processed-video" controls style="display: none;">
                    <source id="video-source" src="" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
            
            <div class="file-uploader">
                <input type="file" id="file-upload" accept="video/*" style="display: none;">
                <button class="upload-btn" onclick="document.getElementById('file-upload').click()">
                    Upload Video
                </button>
            </div>
        </div>

        <div class="right-column">
            <!-- Terminal with Initial System Messages -->
            <div class="terminal" id="terminal">
                > System initialized<br>
                > Waiting for input...<br>
                > Ready for video processing<br>
            </div>
            
            <!-- Loading Indicator -->
            <div class="loading-bar" id="loading-bar" style="display: none;">
                <div class="progress"></div>
            </div>
            
            <!-- Fuel Display -->
            <div class="fuel-display">
                Total Fuel Injected: <span id="fuel-value">0.00</span> L
            </div>
        </div>
    </div>

    <script>
        function updateVideoSource(videoUrl) {
            let videoElement = document.getElementById("processed-video");
            let videoSource = document.getElementById("video-source");

            videoSource.src = videoUrl;
            videoElement.load();
            videoElement.style.display = "block";  // Make sure the video is visible
        }

        // Example usage (this should be called when your backend provides the processed video URL)
        // updateVideoSource("{{ url_for('processed_video', filename='processed_example.mp4') }}");
    </script>

    <script src="{{ url_for('static', filename='js/dash.js') }}"></script>
</body>
</html>
